
\documentclass[12pt, draft]{article}

\usepackage{xeCJK}
\setCJKmainfont{AR PL UKai TW}

\usepackage{csquotes}
\usepackage[english]{babel}

\usepackage[notes, backend=biber]{biblatex-chicago}
\bibliography{main}

%\usepackage{parskip}

\usepackage{color}
\usepackage[usenames,dvipsnames]{xcolor}

\usepackage[normalem]{ulem}
\usepackage{listings}
\usepackage{hyperref}

\begin{document}

\title{Karl-Steinbuch-Stipendium}
\author{David Höppner and Manuel Sassmann}
\date{\today}
\maketitle

\begin{abstract}
\end{abstract}

\section{Technical Report}

\subsection{Deployment and Development Environment}

In the orginal project proposal we intended to use OpenIndiana\footnote{\url{http://openindiana.org/}},
an illumos\footnote{\url{http://wiki.illumos.org/display/illumos/illumos+Home}}
 based distribution, as your base deployment and development
platform.
While we still consider it a better platform with
the availability of better debugging and analysis tools
such as dtrace and mdb, and a better filesystem in the form of zfs,
we did run into problems connecting various shared-ip zones over a single network interface.
As we don't wanted waste too much critical time at the
start period of the project, we switched to a linux based
distribution and used containers (LXC) to separate our
services.  For the container management we initially
used pre-stable release of docker.\footnote{\url{https://www.docker.com/}}
That was a slightly
bumpy road, as we encountered various bugs and interface changes.
With the advent of docker version 1.0 the interface has
stabilized and the platform has matured.
But its design is still inferior to other
container implementations like the solaris zones or freebsd jails.

We provide docker container build recipes for our
postgres, exist, fuseki, rabbitmq and django services.
For the developer we provide a vagrant\footnote{\url{https://www.vagrantup.com/}}
 file, which 
installs your deployment distribution (CoreOS)
into a virtual machine and then provisions our
docker containers.\footnote{CoreOS is a custom minimal distribution just to run
containers \url{https://coreos.com/} \href{https://coreos.com/}{CoreOS} its similar to the illumos based SmartOS.}
Thus the developer only needs to run the command: \lstinline´# vagrant up´
to install a local development environment.
Deployment to a server is similar simple by running the docker container build recipes
by hand.

\subsection{Web Application}

The web application provides the primary interface to the user. Its the main
interaction point with our services.
The web application connects and interacts with the various data sources and presents
the results to the user.
We currently use the django framework\footnote{\url{https://www.djangoproject.com/}}
 with various additional modules,
the main advantage of a python based framework resides in the availability
of some third-party modules, that easy the interaction with existdb and XML
documents.\footnote{Specifically two packages from Emory Libraries: eulxml and eulexistdb.}
The user is presented with an interface to browse our collection of texts by
author or title.  Other services are also available to the user, like our
OCR or the annotation service.

We consider the git file repository of your TEI documents are the master copy
of our documents.  The main reason be for this stipulation resides in the
UIMA component which annotates new entities on demand, but for which we
currently only have a file collection reader.  If an update to the master copy
is applied, our XML database will reload the documents that did change.

\subsubsection{Text Viewer}

The user can browse TEI documents currently loaded in the XML database by title
or author.  If he desires to view a single document, the TEI document under question
will be fetched from the XML database.  Before the document is present to the
user it must be XTSL transformed to rewrite the TEI tags into valid HTML
tags.

Texts and single chapters can be downloaded in a plain text format or as pdf files.
The user has the option to undisplay various annotations he has no interest in, for example
he can hide the (modern) interpuction by pressing ".".  Users should consult the
help modal page for further shortcuts.

New annotations can also be added in the viewer. The user selects the phrase he wants
to mark with the mouse and then enters a keyboard shortcut to tag the selection.
The marked phrase is send to the server and after a validation enters
our RDF store as a new fact.  Our RDF store is partitioned into 2 named graphs.
New facts supplied by users are by default stored in an extra graph, to seperate them
from the core verified RDF store.  An table with the available keyboard commands
can be found at the documentation section of the website.
Annotations can be viewed and managed in the django admin interface if they are not
automatical added to the RDF store.

\subsubsection{OCR}

Part of our web application is a OCR service.  We use tesseract\footnote{\url{http://code.google.com/p/tesseract-ocr/}}
 in the backend for the
actually recognition.  As tesseract is an open source solution the accuracy does not
reach the levels of commercial offerings.  Our experiments with ABBYY FineReader
resulted in a much better overall recognition rate, but the licensing fee is bound
to the pages scaned.\footnote{\url{http://www.abbyy.de/}}
We hope the Internet Archive upgrades they version of ABBYY some day to provide better fulltext
version of they PDF documents.

\subsection{SPARQL}

We also run a public SPARQL (SPARQL Protocol and RDF Query Language) endpoint.
This endpoint can be used via a web interface or programmatically through
a client library.  It provides access to our manually modeled facts
and also to facts extracted from automatic annotated sources.
We use the functional notation of OWL (Web Ontology Language) to generate
the corresponding RDF (Resource Description Framework) triples.
Currently we employ a java based RDF store.\footnote{\url{http://jena.apache.org/documentation/serving_data/index.html}}
If this solution does not scale well enough we might evaluate
4store as an alternative.\footnote{\url{http://4store.org/}}

\subsection{UIMA}

UIMA (Unstructured Information Management Architecture) started as an
 IBM project (Watson).\footnote{\url{http://uima.apache.org/}}
It was later open sourced and is now an apache project.
UIMA is a architecture and a standard for annotating and enriching unstructured data.
It can be used for textual sources, but its not limited to this domain.
In UIMA various components interact on top of a common analysis structure (CAS)
to annotate documents. At the core we find analysis engines (AE) that
annotate single documents by inserting types with offsets into the CAS.
Analysis engines can share common knowledge (data structures) by
using shared resource objects. This not only bundles
source code into a single place but also speeds up processing as
common data structures will be constructed only once and will be cached
between single documents and by all engines.
Before the analysis engines analyse documents, those documents
must be transformed into the CAS format.
This is done by the collection reader interface. Collection readers
iterate through a document collection and build CAS structures
for every single element. The CAS is passed then on to the analysis engines.
As a final step the CAS could then be serialized again
by a CAS consumer to generate a document in the original document format.
In our UIMA component we follow this workflow but an additional CAS consumer
extractes new information from the annotation it encounters
in the newly processed document.  As analysis engine can be run in
parallel or sequential order, as independent or
depend engines (engine B needs the annotation results from engine A)
schedules are needed. We currently use a simple linear pipeline to
run our analysis engines. UIMA currently provides only this functionality
more complex setups needs additional scale out frameworks that are
not as easy to deploy.

While UIMA provides a mature and well structured architecture for text analysis,
some feature contrain the practical use.\footcite{Goetz:2014}
In our context the static type system has the greatest negative impact.
As we can hold to the precondition that all the input documents to our
collection reader are valid TEI documents, we would preferable
create for every encounted TEI tag a corresponding UIMA type and an annotation. 
This would allow us to preserve all TEI tags encounted, even if dont use them
yourself in your analysis engines. With a static type system
as currently present in UIMA we need define all tags beforehand.
As the TEI standard is quite extensive in the number of tags introduced,
this is a tedious and laborious task.
So we currently do not implement the whole standard but only a selection of tags
our analysis engine use in their automatic annotations.

\subsection{Future Improvements}

\subsubsection{Infrastructure}
Single services should be clustered to provide better availability. While CoreOS's key-value store etcd
and fleet provide such capabilities, Mesos\footnote{\url{http://mesos.apache.org/}}
 or Kubernetes\footnote{\url{https://github.com/GoogleCloudPlatform/kubernetes}}
 likely better solutions.
% clustering

\subsubsection{Web Application}

A full XML database is not necessary for the main functions of the site.
Documents should be stored in a key value cache to provide
better response times and to simplify the core functions.

\subsubsection{UIMA}
Besides the java version the UIMA also provides a C++ interface.
A possible speed up of the interactive markup should be evaluated
if we rewrite the manual annotator in C++ and trim its down to its basic
functionality.

\section{Date and Time Expressions}

In the following section we will outline a concrete annotation example.
Date time expressions are particular handy, as they play a major role in 
historical documents and occur in a fixed standard format.

\subsection{Dynasties}

In our context a dynasty is a period of time in which a succession of hereditary
rulers by patrilineal descent from the dynastic founder ruled.\footcite[3]{Wilkinson:2012} 
The probably most famous Chinese dynasty known to the general readership
is the Tang 唐 dynasty which was ruled by the Li 李 clan and lasted from 618 AD to 907 AD.
An overview of all terms for imperial dynasties can be found in the literature.\footnote{
Table 3 in \cite[4]{Wilkinson:2012}}
Most expressions for dynasties in chinese are polysemes. For example the aforementioned
\emph{tang} has also the meanings of 'dike' or it can function as a place name.\footcite[117]{Wang:2000}
This introduces the general problem of ambiguous expressions, which can only be solved
by further analysis of the expression itself or/and by more context. This is a problem
which solves itself for most expressions with more then two characters, as the percentage
of ambiguous words drops dramatically. So the expression \emph{Nan Tang} 南唐
and \emph{Hou Tang} 後唐 are less ambiguous.

唐朝
後唐時

If we observe the contextual occurences of single character dynasty expression we find the
following uses:

\subsubsection{Dynasty Person}
A dynasty appears in prefix position before a persons name to qualify the person further.

{\footnotesize
\begin{table}[h]
\caption{Dynasty expression before person name}
\begin{tabular}{lll}
\emph{Tang Han Yu} & 唐韓愈 & Han Yu (768-824) of the Tang [dynasty] \\
\emph{Tang Xuanzong} & 唐玄宗 & Emperor Xuan of the Tang [dynasty] \\
\emph{Tang shushi Su Jiaqing} &  唐術士蘇嘉慶 & esoteric art expert Su Jiaqing of the Tang [dynasty] \\
\emph{Tang xiang Pei Du} &  唐相裴度 & chancellor Pei Du (765-839) of the Tang [dynasty] \\
\end{tabular}
\end{table}
}

We iterate over persName annotations and check for prefix dynasty expressions.

\subsubsection{Dynasty + Expression}
A certain part of the particular dynasty is denoted.

{\footnotesize
\begin{table}[h]
\caption{Dynasty as part of an time range}
\begin{tabular}{lll}
\emph{Song yuqie bainian} & 宋興且百年 & the Song [dynasty] flourished since hundred years \\
\emph{Song zhi zhongye} & 宋之中葉 & in the middle period of the Song [dynasty] \\
\emph{zi Tang qi jin} & 自唐迄今 & from the Tang [dynasty] till today \\
\emph{zi Tang zhi Zhou} & 自唐至周 & from the Tang [dynasty] till the Zhou [dynasty] \\
\end{tabular}
\end{table}
}

\subsubsection{Dynasty + Era}

{\footnotesize
\begin{table}[h]
\caption{Dynasty with era names}
\begin{tabular}{lll}
\hline
\emph{Tang wude chu} & 唐武德初 & at the beginning of the Tang era \emph{wude} \\
\emph{Tang kaiyuan zhong } & 唐開元中 & in the era \emph{kaiyuan} of the Tang \\
\emph{Tang kaiyuan mo} & 唐開元末 & at the end of the \emph{kaiyuan} era of the Tang \\
\emph{Tang kaiyuan jian} & 唐開元間 & in the \emph{kaiyuan} era of the Tang \\
\end{tabular}
\end{table}
}

\subsubsection{Dynasty + Era name + Year}

{\footnotesize
\begin{table}[h]
\caption{Dynasty with era names}
\begin{tabular}{lll}
\hline
\emph{Tang tianbao wu nian} & 唐天寶五年 & the fifth year of \emph{tianbao} \\
\end{tabular}
\end{table}
}


dates, lucky days, travel ->

eclipse of the sun

24 Solar Terms

\section{General Problems}
CDDB
knowledge graph
dbpedia


chenghu expressions
personal names per time periods

\end{document}
